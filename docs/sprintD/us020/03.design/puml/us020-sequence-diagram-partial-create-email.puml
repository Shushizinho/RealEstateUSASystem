@startuml
'https://plantuml.com/sequence-diagram

skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false


participant ":ReplyToAgentAboutVisitRequestController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "Repositories\n:Repositories" as PLAT
participant "VisitRequestRepository:\VisitRequestRepository" as VRR

autonumber
 -> CTRL :  createEmail(sender, receiver, subject, message)

        activate CTRL
        CTRL -> RepositorySingleton : getInstance()


                    activate RepositorySingleton

                    RepositorySingleton --> CTRL: repositories
                    deactivate RepositorySingleton

                    CTRL -> PLAT : getVisitRequestRepository()
                    activate PLAT

                    PLAT --> CTRL : VisitRequestRepository
                    deactivate PLAT


                    CTRL -> VRR :createEmail(sender, receiver, subject, message)
                    activate VRR

                    VRR --> VRR : createEmail(sender, receiver, subject, message)
                    VRR --> CTRL : message
                    deactivate VRR

                    <-- CTRL : mesage
                    deactivate CTRL
@enduml